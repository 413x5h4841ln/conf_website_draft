{{ define "main" }}
<main class="container">
  <h1>{{ or .Title "News" }}</h1>
  <p class="lead">Latest updates from Statisticon.</p>

  {{ $pages := .Pages.ByDate.Reverse }}
  {{ if gt (len $pages) 0 }}
    {{ $p := .Paginate $pages }}
    <div class="post-list">
      {{ range $p.Pages }}
        <article class="post-card card">
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="post-meta">
            <time datetime="{{ .Date }}">{{ .Date.Format "02 Jan 2006" }}</time>{{ with .Params.author }} · {{ . }}{{ end }}
          </p>
          {{ with .Params.summary }}
            <p>{{ . }}</p>
          {{ else }}
            <p>{{ .Summary }}</p>
          {{ end }}
          <a class="post-readmore" href="{{ .RelPermalink }}">Read more →</a>
        </article>
      {{ end }}
    </div>

    {{ if gt $p.TotalPages 1 }}
      <nav class="pagination" aria-label="Pagination">
        {{ if $p.HasPrev }}<a href="{{ $p.Prev.URL }}">&larr; Newer</a>{{ else }}<span class="disabled">&larr; Newer</span>{{ end }}
        <span>Page {{ $p.PageNumber }} of {{ $p.TotalPages }}</span>
        {{ if $p.HasNext }}<a href="{{ $p.Next.URL }}">Older &rarr;</a>{{ else }}<span class="disabled">Older &rarr;</span>{{ end }}
      </nav>
    {{ end }}
  {{ else }}
    <p>No news yet. Check back soon.</p>
  {{ end }}
</main>
{{ end }}
